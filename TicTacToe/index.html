<!DOCTYPE html>
<html lang="en">
<head>
  <title>TicTacToe</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
  <!--<link href="css/style.css" rel="stylesheet">-->
</head>
<body>
<div class="container">
  <div class="chooser">
    <p>Choose your weapon but remember that X always goes first:</p>
    <p><span class="choice" id="pickX">X</span> or <span class="choice" id="pickO">O</span></p>
  </div>
  <p class="turn">Turn: <span class="turnText"></span></p>
  <div id="board">
    <div id="oneOne" class="box"></div><div id="oneTwo" class="box"></div><div id="oneThree" class="box"></div>
    <div id="twoOne" class="box"></div><div id="twoTwo" class="box"></div><div id="twoThree" class="box"></div>
    <div id="threeOne" class="box"></div><div id="threeTwo" class="box"></div><div id="threeThree" class="box"></div>
  </div>
  <p class="score">X wins: <span id="xWins">0</span> | Ties: <span id="ties">0</span> | O wins: <span id="oWins">0</span></p>
  <p id="resetText">Reset</p>
  <!-- <p id="ai">AI</p> -->
</div>

<style>
  body {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Roboto', sans-serif;
    font-size: 20px;
    margin: 0;
    background: #3F51B5;
  }
  .container {
    max-width: 350px;
    background: rgba(34, 34, 34, 0.85);
    box-shadow: 0 0 0 5px rgba(0,0,0,0.1);
    padding: 50px; 
    border:1px solid #fafafa;
    text-align: center;
    color: #fafafa;
  }
  .chooser {
    display: none;
  }
  .choice {
    font-size: 40px;
    margin: 10px;
  }
  .turn {
    margin: 0 0 5 0;
  }
  .score {
    margin: 5 0 0 0;
  }
  #board > div {
    display: inline-block;
    margin: 5px;
    width: 100px;
    height: 100px;
    font-size: 80px;
    vertical-align: middle;
    color: #FF5252;
    background: #757575;
  }
  #resetText {
    display: none;
    cursor: pointer;
    margin-bottom: 0;
  }

</style>

<script>
  const boxes = document.querySelectorAll('.box');
  let turn = document.querySelector('.turnText');
  const res = document.getElementById('resetText');
  let player = 1;
  turn.innerHTML = 'X';
  let winsX = 0;
  let winsO = 0;
  let tie = 0;
  let filled = 0;
  let emptyBoxes = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];

  function checkWin(elem) {
    // Win condition first row
    if (document.getElementById('oneOne').innerHTML === elem && document.getElementById('oneTwo').innerHTML === elem && document.getElementById('oneThree').innerHTML === elem) {
      filled = 10;
      turn.innerHTML = `${elem} wins!`;
      res.style.display = "inherit";
      if (player === 0) {
        winsX++;
        document.getElementById('xWins').innerHTML = winsX;
      } else {
        winsO++;
        document.getElementById('oWins').innerHTML = winsO;
      }
    }
    // Win condition second row
    if (document.getElementById('twoOne').innerHTML === elem && document.getElementById('twoTwo').innerHTML === elem && document.getElementById('twoThree').innerHTML === elem) {
      filled = 10;
      turn.innerHTML = `${elem} wins!`;
      res.style.display = "inherit";
      if (player === 0) {
        winsX++;
        document.getElementById('xWins').innerHTML = winsX;
      } else {
        winsO++;
        document.getElementById('oWins').innerHTML = winsO;
      }
    }
    // // Win condition third row
    if (document.getElementById('threeOne').innerHTML === elem && document.getElementById('threeTwo').innerHTML === elem && document.getElementById('threeThree').innerHTML === elem) {
      filled = 10;
      turn.innerHTML = `${elem} wins!`;
      res.style.display = "inherit";
      if (player === 0) {
        winsX++;
        document.getElementById('xWins').innerHTML = winsX;
      } else {
        winsO++;
        document.getElementById('oWins').innerHTML = winsO;
      }
    }
    // // Win condition diagonal 1
    if (document.getElementById('oneOne').innerHTML === elem && document.getElementById('twoTwo').innerHTML === elem && document.getElementById('threeThree').innerHTML === elem) {
      filled = 10;
      turn.innerHTML = `${elem} wins!`;
      res.style.display = "inherit";
      if (player === 0) {
        winsX++;
        document.getElementById('xWins').innerHTML = winsX;
      } else {
        winsO++;
        document.getElementById('oWins').innerHTML = winsO;
      }
    }
    // // Win condition diagonal 2
    if (document.getElementById('threeOne').innerHTML === elem && document.getElementById('twoTwo').innerHTML === elem && document.getElementById('oneThree').innerHTML === elem) {
      filled = 10;
      turn.innerHTML = `${elem} wins!`;
      res.style.display = "inherit";
      if (player === 0) {
        winsX++;
        document.getElementById('xWins').innerHTML = winsX;
      } else {
        winsO++;
        document.getElementById('oWins').innerHTML = winsO;
      }
    }
    if (filled === 9) {
      turn.innerHTML = "It's a tie!";
      tie++;
      document.getElementById('ties').innerHTML = tie;
      res.style.display = "inherit";
    }
  }
  function displayChar() {
    if (this.innerHTML !== 'X' && this.innerHTML !== 'O') {
      filled++;
      if (filled <= 9) {
        if (player === 1) {
          this.innerHTML = 'X';
          player = 0;
          turn.innerHTML = 'O';
          checkWin('X');
          runAi();
        } else {
          this.innerHTML = 'O';
          player = 1;
          turn.innerHTML = 'X';
          checkWin('O');
          runAi();
        }
      }
    }
  }
  function reset() {
    boxes.forEach(box => box.innerHTML = "");
    filled = 0;
    player = 1;
    turn.innerHTML = 'X';
    res.style.display = "none"; 
    emptyBoxes = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
  }
  res.addEventListener('click', reset);

  // AI time
  function aiMove() {
    console.log('ai ran');
    var rand = emptyBoxes[Math.floor(Math.random() * emptyBoxes.length)];
    console.log(rand);
    switch (rand) {
      case 'one':
        if (document.getElementById('oneOne').innerHTML !== 'X' && document.getElementById('oneOne').innerHTML !== 'O') {
          document.getElementById('oneOne').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('one');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'two':
        if (document.getElementById('oneTwo').innerHTML !== 'X' && document.getElementById('oneTwo').innerHTML !== 'O') {
          document.getElementById('oneTwo').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('two');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'three':
        if (document.getElementById('oneThree').innerHTML !== 'X' && document.getElementById('oneThree').innerHTML !== 'O') {
          document.getElementById('oneThree').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('three');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'four':
        if (document.getElementById('twoOne').innerHTML !== 'X' && document.getElementById('twoOne').innerHTML !== 'O') {
          document.getElementById('twoOne').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('four');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'five':
        if (document.getElementById('twoTwo').innerHTML !== 'X' && document.getElementById('twoTwo').innerHTML !== 'O') {
          document.getElementById('twoTwo').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('five');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'six':
        if (document.getElementById('twoThree').innerHTML !== 'X' && document.getElementById('twoThree').innerHTML !== 'O') {
          document.getElementById('twoThree').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('six');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'seven':
        if (document.getElementById('threeOne').innerHTML !== 'X' && document.getElementById('threeOne').innerHTML !== 'O') {
          document.getElementById('threeOne').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('seven');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'eight':
        if (document.getElementById('threeTwo').innerHTML !== 'X' && document.getElementById('threeTwo').innerHTML !== 'O') {
          document.getElementById('threeTwo').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('eight');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      case 'nine':
        if (document.getElementById('threeThree').innerHTML !== 'X' && document.getElementById('threeThree').innerHTML !== 'O') {
          document.getElementById('threeThree').click();
        } else {
          console.log('need new int');
          let index = emptyBoxes.indexOf('nine');
          emptyBoxes.splice(index, 1);
          aiMove();
        }
        break;
      default:
        break;
    }
  }
  function runAi() {
    if (player === 0) {
      console.log('running ai');
      aiMove();
      return;
    } else {
      return;
    }
  }
  //document.getElementById('ai').addEventListener('click', aiMove);
  boxes.forEach(box => box.addEventListener('click', displayChar));
</script>
</body>
</html>